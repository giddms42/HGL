<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="gg">

	<resultMap type="com.lol.hgl.dto.ggDto" id="ggDtoMap">
		<result column="GGNO" property="ggNo"/>
		<result column="GGROWNUM" property="ggRowNum"/>
		<result column="GGWRITER" property="ggWriter"/>
		<result column="GGTITLE" property="ggTitle"/>
		<result column="GGCONT" property="ggCont"/>
		<result column="GGREADCNT" property="ggReadcnt"/>
		<result column="GGDATE" property="ggDate"/>
		<result column="GGIMGNAME" property="ggImgname"/>
	</resultMap>
	
	<resultMap type="com.lol.hgl.dto.ggcmDto" id="ggcmDtoMap">
		<result column="GGNO" property="ggNo"/>
		<result column="GGCMNO" property="ggcmNo"/>
		<result column="GGCMWRITER" property="ggcmWriter"/>
		<result column="GGCMCONT" property="ggcmCont"/>
		<result column="GGCMDATE" property="ggcmDate"/>
	</resultMap>
	
	<select id="ggListCount" resultType="int">
	 SELECT COUNT(*) FROM GG 
	</select>
	
	<select id="ggListRowNum" parameterType="map" resultType="int">
	<![CDATA[
	select X.RN
	from ( 
    select A.GGNO, A.GGROWNUM, A.GGWRITER, A.GGTITLE, A.GGCONT, A.GGREADCNT, A.GGDATE, A.GGIMGNAME,
    ROWNUM AS RN
    from (
        select *
        from GG ORDER BY GGNO DESC) A
    where ROWNUM <= #{endPost}) X
	where X.RN >= #{startPost}
	ORDER BY X.GGNO
	]]>
	</select>
	
	
	
	<select id="selectAll" parameterType="map" resultMap="ggDtoMap">
	<![CDATA[
	select *
	from ( 
    select A.GGNO, A.GGROWNUM, A.GGWRITER, A.GGTITLE, A.GGCONT, A.GGREADCNT, A.GGDATE, A.GGIMGNAME,
    ROWNUM AS RN
    from (
        select *
        from GG ORDER BY GGNO DESC) A
    where ROWNUM <= #{endPost}) X
	where X.RN >= #{startPost}
	ORDER BY X.GGNO DESC
	]]>
	</select>
	
	
	
	
	<select id="selectOne" resultType="ggDto" parameterType="int">
		SELECT * FROM GG WHERE GGNO=#{ggNo}
	</select>
	
	<delete id="delete" parameterType="int">
		DELETE FROM GG WHERE GGNO = #{ggNo}
	</delete>
	
	<insert id="insert" parameterType="ggDto">
		INSERT INTO GG VALUES(
		GGNO_SEQ.NEXTVAL,null, #{ggWriter}, #{ggTitle}, #{ggCont}, 0, SYSDATE, ''
		)
	</insert>
	
	<update id="update" parameterType="ggDto">
		UPDATE GG SET GGTITLE= #{ggTitle}, GGCONT= #{ggCont} WHERE GGNO= #{ggNo}
	</update>
	
	<insert id="repleyInsert" parameterType="ggcmDto">
		INSERT INTO GGCM VALUES(
		#{ggNo},GGCMNO_SEQ.NEXTVAL, #{ggcmWriter}, #{ggcmCont}, SYSDATE
		)
	</insert>
	
	<select id="repleySelectList" resultMap="ggcmDtoMap" parameterType="int">
		SELECT * FROM GGCM WHERE GGNO=#{ggNo} ORDER BY GGCMNO
	</select>
	
	<select id="repleyDelete" parameterType="int">
		DELETE FROM GGCM WHERE GGCMNO = #{ggcmNo}
	</select>


</mapper>